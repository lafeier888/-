<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="../css/aui.css"/>
    <link rel="stylesheet" type="text/css" href="../css/auislide.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>

    <style>
        .empty {
            text-align: center;
            padding: 120px 0;
        }
    </style>

    <style>
        /*新加空提示信息*/

        .m-noRecord {
            padding: .395rem 0 0;
            text-align: center;
        }

        .m-noRecord .c-icon-noRecord {
            background: url(../image/app/Loading2.gif) no-repeat;
            background-size: cover;
            width: 15rem;
            height: 10rem;
            /* margin: .485rem auto 0; */
            margin: 0 auto;
        }
    </style>


</head>

<body style="background-color:#fff">


<!-- 顶部轮播图 -->
<div id="aui-slide" class="fx-box">
    <div id="slidebox" class="aui-slide-wrap"
         style="margin: 10px;border-radius:0.5rem;box-shadow:0.1rem 0.1rem 0.4rem rgba(99, 99, 99, 0.3);">


        <!--顶部横幅未加载完成时的提示-->
        <img id="bpic" src="../image/default_picture/zhifou.jpeg" >
        <!--顶部横幅未加载完成时的提示-->


    </div>
    <div class="aui-slide-page-wrap">
        <!--分页容器-->
    </div>
</div>
<!-- 轮播图模板 -->
<script type="text/x-dot-template" id="silderboxtpl">
    {{~ it  : value : index }}
    <div class="aui-slide-node bg-dark" tapmode onclick="toBanner('{{= value.linkurl }}')">
        <img src="{{= value.picurl }}"/>
    </div>
    {{~}}
</script>


<!-- 公告 -->
<div class="gonggao" style=" border-radius: 0px 0px 30px 30px; box-shadow: 0.01rem 0.15rem 0.1rem rgba(0, 0, 0, 0.05);">
    <div class="list-title-l">
        <i class="iconfont icon-xitonggonggao" style="color:#cdcbcb;font-size: 1rem"></i>
    </div>
    <div class="gonggao-r">
        <span id="gonggao"
              style="color:#cdcbcb;font-size: 0.65rem;padding-top:0.3rem;margin-left: 10px;">全网会员视频任性看!</span>
    </div>
</div>

<div class="br"></div>


<!-- 公告下边文字广告位 -->
<div class="list-title">
    <div class="list-title-l">
        <span style="color:#444;font-size: 0.6rem"><i class="iconfont icon-zuirehotchunse"
                                                      style="color:#ff7600;font-size: 0.8rem"></i>全网VIP视频观看专区</span>
    </div>
    <div class="list-title-r" id="wzbox_top">
        <!--右侧顶部右侧文字广告位-->
        <!--客服微信:lafeier_888-->
    </div>
</div>

<!-- 影视区 -->
<section class="aui-grid aui-margin-b-15">
    <div class="aui-row" id="div_list_f">
        <!--VIP观影区 调用-->


        <!--VIP 观影区未加载完成时的提示-->
        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/iqiyi.png"/></i>
            <div class="aui-grid-label">爱奇艺</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/tengxun.png"/></i>
            <div class="aui-grid-label">腾讯视频</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/youku.png"/></i>
            <div class="aui-grid-label">优酷视频</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/souhu.png"/></i>
            <div class="aui-grid-label">搜狐视频</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/mgtv.png"/></i>
            <div class="aui-grid-label">芒果TV</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/pptv.png"/></i>
            <div class="aui-grid-label">PPTV</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/baofeng.png"/></i>
            <div class="aui-grid-label">暴风影音</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/m1905.png"/></i>
            <div class="aui-grid-label">M1905</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/leshi.png"/></i>
            <div class="aui-grid-label">乐视视频</div>
        </div>
        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/fengxing.png"/></i>
            <div class="aui-grid-label">风行视频</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/migu.png"/></i>
            <div class="aui-grid-label">咪咕影院</div>
        </div>

        <div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">
            <i class="aui-iconfont"><img src="../image/default_picture/lizi.png"/></i>
            <div class="aui-grid-label">梨视频</div>
        </div>
        <!--VIP 观影区未加载完成时的提示-->
    </div>
</section>
<!-- 影视区模板 -->
<script type="text/x-dot-template" id="navcattpl">
    {{~ it : value : index }}
    <div class="aui-col-xs-3 pt-list" tapmode onclick="openLive('{{= value. linkurl }}')">
        <i class="aui-iconfont"><img src="{{= value. picurl }}"/></i>
        <div class="aui-grid-label">{{= value. name }}</div>
    </div>

    {{~}}

</script>


<!-- 观影区下方图片广告 -->
<!--<div class="fx-box">-->
    <!--<div id="lrbox" class="aui-slide-wrap"-->
         <!--style="margin: 10px;border-radius:0.5rem;box-shadow:0.1rem 0.1rem 0.4rem rgba(99, 99, 99, 0.3);">-->
        <!--&lt;!&ndash;底部横幅未加载完成时的提示&ndash;&gt;-->
        <!--<img id="bpic" src="../image/default_picture/youxizhibo.png" onClick="UnloadedCompleted()">-->
        <!--&lt;!&ndash;底部横幅未加载完成时的提示&ndash;&gt;-->
    <!--</div>-->
<!--</div>-->
<!--<script type="text/x-dot-template" id="lrtpl">-->
    <!--<img id="bpic" src="http://video.gotohard.cn/{{=it.picurl}}"-->
         <!--style="border-radius:0.5rem;box-shadow:0.1rem 0.1rem 0.4rem rgba(99, 99, 99, 0.3);"-->
         <!--onclick="toBanner('{{=it.linkurl}}')">-->
<!--</script>-->

<!--&lt;!&ndash; 观影区下方文字广告 &ndash;&gt;-->
<!--<div class="list-title">-->
    <!--<div class="list-title-l">-->
        <!--<span style="color:#444;font-size: 0.6rem">推荐服务</span>-->
    <!--</div>-->
    <!--<div class="list-title-r" id="wzbox_bottom">-->
        <!--广告位-->
    <!--</div>-->
<!--</div>-->

<!--&lt;!&ndash; 观影区下方格子 &ndash;&gt;-->
<!--<section class="aui-grid aui-margin-b-15">-->
    <!--<div class="aui-row" id="div_list">-->
        <!--<div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">-->
            <!--<div class="myui-label">购</div>-->
            <!--<div class="myui-label-b">海量优惠</div>-->
            <!--<i class="aui-iconfont"><img src="../image/default_picture/youhuiquan.png"/></i>-->
        <!--</div>-->
        <!--<div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">-->
            <!--<div class="myui-label">吃</div>-->
            <!--<div class="myui-label-b">食为天</div>-->
            <!--<i class="aui-iconfont"><img src="../image/default_picture/ico_5.png"/></i>-->
        <!--</div>-->
        <!--<div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">-->
            <!--<div class="myui-label">玩</div>-->
            <!--<div class="myui-label-b">玩个够</div>-->
            <!--<i class="aui-iconfont"><img src="../image/default_picture/wan.png"/></i>-->
        <!--</div>-->
        <!--<div class="aui-col-xs-3 pt-list" tapmode onClick="UnloadedCompleted()">-->
            <!--<div class="myui-label">乐</div>-->
            <!--<div class="myui-label-b">十年少</div>-->
            <!--<i class="aui-iconfont"><img src="../image/default_picture/ico_1.png"/></i>-->
        <!--</div>-->
    <!--</div>-->
<!--</section>-->
<!--<script type="text/x-dot-template" id="navtjtpl">-->
    <!--/*底部图标模板*/ {{~ it.data : value : index }}-->
    <!--<div class="aui-col-xs-3 pt-list" tapmode onclick="toBanner('{{= value. linkurl }}')">-->
        <!--<div class="myui-label">{{= value. name }}</div>-->
        <!--<div class="myui-label-b">{{= value. content }}</div>-->
        <!--<i class="aui-iconfont"><img src="http://video.gotohard.cn/{{= value. picurl }}"/></i>-->
    <!--</div>-->
    <!--{{~}}-->
<!--</script>-->

<!--</body>-->

<!--&lt;!&ndash;观影区下方两个文字广告-左&ndash;&gt;-->
<!--<script type="text/x-dot-template" id="wzttpl">-->
    <!--<span style="color:#f52737;font-size: 0.6rem" onclick="toBanner('{{=it.linkurl}}')">{{=it.name}}</span>-->
<!--</script>-->

<!--&lt;!&ndash;观影区下方两个文字广告-右&ndash;&gt;-->
<!--<script type="text/x-dot-template" id="wzbtpl">-->
    <!--<span style="color:#f52737;font-size: 0.6rem" onclick="toBanner('{{=it.linkurl}}')">{{=it.name}}</span>-->

<!--</script>-->





<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/doT.js"></script>
<script type="text/javascript" src="../script/auipullrefresh.js"></script>
<script type="text/javascript" src="../script/auislide.js"></script>
<script type="text/javascript" src="../script/auilazyload.js"></script>
<script type="text/javascript">
    var api_url = localStorage.getItem('api_url');
    apiready = function () {
        init();//初始化页面数据
        refresh();//注册下拉刷新事件
        //优化点击
        api.parseTapmode();
        //轮播图切换特效
        new auiLazyload({
            errorImage: '../image/error-img.jpg'
        });
    }
    //首页数初始化
    function init() {
        gonggao();//加载公告
        silderbox();//加载轮播图banner
        videoarea();//加载视频平台
    }
    // 下拉刷新
    function refresh() {
        //自定义刷新
        api.setCustomRefreshHeaderInfo({
            bgColor: '#fff',
            pull: [
                'widget://image/app/xiala/shuaxin.png',
            ]
        }, function () {
            init();
            api.sendEvent({
                name: 'refreshConfig',
                extra: {
                }
            });
            setTimeout(function () {
                api.refreshHeaderLoadDone()
            }, 3000);
        });
    }

    //vip过期提示
    function VipExpiredHint() {
        /*会员过期弹窗提示*/
        var dialogBox = api.require('dialogBox');
        dialogBox.alert({
            tapClose: true, //描述：（可选项）是否点击遮罩层关闭该对话框  默认值：false
            texts: {
                content: '超级视频VIP已过期',
                leftBtnTitle: '领取',
                rightBtnTitle: '激活'
            },
            styles: {
                bg: '#fff', //（可选项）字符串类型；对话框整体背景配置，支持#、rgb、rgba、img；默认：#fff
                corner: 10, //（可选项）数字类型；对话框背景圆角大小；默认：2
                w: 300, //（可选项）数字类型；对话框的宽；默认：300
                title: { //（可选项）JSON对象；弹窗标题栏样式配置，不传则不显示标题区域
                    marginT: 20, //（可选项）数字类型；标题栏与对话框顶端间距；默认：20
                    icon: 'widget://image/app/VipExpiredTisi.png', //（可选项）字符串类型；标题前面的图标路径，要求本地路径（widget://、fs://）；图片为正方形的，如：50*50、100*100，建议开发者传大小合适的图片以适配高分辨率手机屏幕，不传则不显示
                    iconSize: 80, //（可选项）数字类型；icon 图标边长大小,若 icon 不存在则此参数无效；默认：24
                    titleSize: 14, //（可选项）数字类型；标题字体大小；默认：14
                    titleColor: '#000' //（可选项）字符串类型；标题字体颜色，支持#、rgb、rgba；默认：#fff
                },
                content: { //（可选项）JSON 对象；文本内容配置，若不传则不显示该区域
                    marginT: 20, //（可选项）数字类型；内容文本顶端与标题栏底端的距离，如果标题栏不存在，则是到窗口顶端的距离；默认：20
                    marginB: 40, //（可选项）数字类型；内容文本底端与 left/right 顶端的距离，如果 left/right 都不存在，则是到对话框底端的距离；默认：20
                    color: '#ff0072', //（可选项）字符串类型；内容文本字体颜色，支持 rgb、rgba、#；默认：#eee
                    size: 12 //（可选项）数字类型：内容文本字体大小；默认：12
                },
                left: { //（可选项）JSON 对象；左边按钮样式配置，不传则不显示左边按钮
                    marginB: 30, //（可选项）数字类型；左边按钮的下边距；默认：7
                    marginL: 30, //（可选项）数字类型；左边按钮的左边距；默认：20
                    w: 100, //（可选项）数字类型；左边按钮的宽；默认：130
                    h: 40, //（可选项）数字类型；左边按钮的高；默认：35
                    corner: 10, //（可选项）数字类型；左边按钮圆角半径；默认：0.0
                    bg: '#3d3d3d', //（可选项）字符串类型；左边按钮的背景，支持rgb、rgba、#、img；默认：'#e0e'
                    color: '#fff', //（可选项）字符串类型；左边按钮标题字体颜色，支持rgb，rgba、#；默认：'#007FFF'
                    size: 12 //（可选项）数字类型；左边按钮标题字体大小；默认：12
                },
                right: { //（可选项）JSON 对象；右边按钮样式配置，不传则不显示右边按钮
                    marginB: 30, //（可选项）数字类型；右边按钮的下边距；默认：7
                    marginL: 40, //（可选项）数字类型；右边按钮左边距；默认：10
                    w: 100, //（可选项）数字类型；右边按钮的宽；默认：130
                    h: 40, //（可选项）数字类型；右边按钮的高；默认：35
                    corner: 10, //（可选项）数字类型；右边按钮圆角半径；默认：0.0
                    bg: '#ff0072', //（可选项）字符串类型；右边按钮的背景，支持rgb、rgba、#、img；默认：'#e0e'
                    color: '#fff', //（可选项）字符串类型；右边按钮标题字体颜色，支持rgb、rgba、#；默认：'#007FFF'
                    size: 12 //（可选项）数字类型；右边按钮标题字体大小；默认：12
                }
            }
        }, function (ret) {
            if (ret.eventType == 'left') {
                api.openWin({
                    name: 'getvip',
                    url: './getvip.html',
                    delay: 300
                });
                var dialogBox = api.require('dialogBox');
                dialogBox.close({
                    dialogName: 'alert'
                });
            } else if (ret.eventType == 'right') {
                api.openWin({
                    name: 'open_vip_win',
                    url: './open_vip_win.html',
                    delay: 300
                });
                var dialogBox = api.require('dialogBox');
                dialogBox.close({
                    dialogName: 'alert'
                });
            }
        });
        /*    会员过期弹窗提示结束    */

    }

    //公告数据获取
    function gonggao() {
        var gonggao = $api.byId('gonggao');
        gonggao.innerHTML = localStorage.getItem('app_index_ad');
    }

    //轮播图数据获取
    function silderbox() {
        //轮播图
        var slidebox = $api.byId('slidebox');//轮播图组件
        var silderboxtpl = $api.byId('silderboxtpl');//轮播图组件模板

        api.ajax({
            url: api_url + '/app/banner/index/cid/1.html',
            method: 'get',
        }, function (ret, err) {
            if (ret) {
                //渲染模板
                var pagefn = doT.template(silderboxtpl.text);
                // slidebox.innerHTML = pagefn(ret);
                slideboxSwitch();//轮播图切换特效
            }
        });
    }

    //视频区数据获取
    function videoarea() {
        var navid = $api.byId('div_list_f');//影视区
        var navtpl = $api.byId('navcattpl');//影视区模板
        api.ajax({
                url: api_url + '/app/banner/index/cid/2.html',
                method: 'get',
            }, function (ret, err) {
                if (ret) {
                    var pagefn = doT.template(navtpl.text);
                    navid.innerHTML = pagefn(ret);
                }
            }
        )
    }

    // 轮播图切换特效
    function slideboxSwitch() {
        var slide = new auiSlide({
            container: document.getElementById("aui-slide"),
            // "width":300,
            "height": 150,
            "speed": 300,
            "pageShow": true,
            "autoPlay": 5000,
            "pageStyle": 'dot',
            "loop": true,
            'dotPosition': 'center',
        });
    }

    // 广告点击触发
    function toBanner(url) {
        if (url == '') {
            api.toast({
                msg: '正在开发中'
            });
        } else {
            //网络连接判断S
            api.ajax({
                url: api_url + '/login/login/banben.html',
                method: 'get'
            }, function (ret, err) {
                if (ret) {
                    api.toast({
                        msg: '加载中'
                    });
                    api.openWin({
                        name: 'h5',
                        url: './h5.html',
                        pageParam: {
                            url: url
                        }
                    });
                } else {
                    api.toast({
                        msg: '请检查网络是否畅通'
                    });
                }
            });
        }
    }

    // 点击影视平台页面
    function openLive(url) {
        var time = localStorage.getItem('user_time');
        var user_id = localStorage.getItem('user_id');
        var username = localStorage.getItem('user_name');
        var timestamp = Date.parse(new Date()) / 1000;
        if (user_id < 1) {
            api.toast({
                msg: '(ｷ｀ﾟДﾟ´)!!    你还没登陆！',
                duration: 2000
            });
            api.openWin({
                name: 'login',
                url: './login.html',
                delay: 500
            });
            return;
        }
        if (time > timestamp || time == -1) {
            api.ajax({
                url: api_url + '/login/login/banben.html',
                method: 'get'
            }, function (ret, err) {
                if (ret) {
                    api.toast({
                        msg: 'VIP登录'
                    });
                    var delay = 0;
                    if (api.systemType != 'ios') {
                        delay = 300;
                    }
                    api.openWin({
                        name: 'video_win',
                        url: './video_win.html',
                        delay: 800,
                        pageParam: {
                            url: url   //平台网址
                        },
                        bgColor: 'rgba(0,0,0,0)'
                    });
                } else {
                    api.toast({
                        msg: '请检查网络是否畅通'
                    });
                }
            });
        }else if (time < timestamp) {
            VipExpiredHint(); // 会员过期弹窗提示
        }
    }

    //数据没有加载的时候出发的方法
    function UnloadedCompleted() {

        api.toast({
            msg: '请检查网络是否畅通'
        });
    }

</script>


</html>
